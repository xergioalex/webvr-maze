<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Hello, World! - A-Frame</title>
    <meta name="description" content="Hello, World! - A-Frame">
    <script src="https://aframe.io/releases/0.5.0/aframe.min.js"></script>
		<script src="https://ucarecdn.com/ba629f6f-fe3e-43cd-ab64-c2de2f7406a9/"></script>
		<script src="//cdn.rawgit.com/donmccurdy/aframe-extras/v3.13.1/dist/aframe-extras.min.js"></script>
  </head>
  <body>
		<a-scene>
			<a-assets>
        <img src="assets/floor-texture.jpg" id="floor" />
				<img src="assets/wall-texture.jpg" id="wall" />
			</a-assets>
			<a-sun-sky material="sunPosition: 0 1 0"></a-sun-sky>
    	<a-grid src="#floor" static-body></a-grid>

    	<a-entity id="player" camera kinematic-body universal-controls position="0 1.6 0" ></a-entity>

      <a-entity id="walls"></a-entity>

      <!-- <a-box position="0 0 -5" src="#wall" width="20" height="10" depth=".2" static-body></a-box> -->

      <!-- <a-box position="0 6 30" rotation="0 10 40" width="4" height="4" depth="4" src="assets/pereirajs.png" >
      	<a-animation attribute="rotation" from="0 0 0" to="0 90 0" repeat="infinite" direction="alternate"></a-animation>
      </a-box> -->
    </a-scene>

    <script>
      // 0 => Nothing
      // 1 => Wall
      // 2 => Player
      // 3 => Award
      var mapa = [
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 3, 1, 0, 0],
        [0, 0, 1, 3, 0, 0, 0, 1, 0, 0],
        [0, 0, 1, 0, 0, 1, 1, 1, 0, 0],
        [0, 1, 1, 2, 0, 1, 0, 1, 0, 0],
        [0, 1, 3, 0, 0, 1, 0, 1, 0, 0],
        [0, 1, 0, 1, 1, 1, 0, 1, 0, 0],
        [0, 1, 1, 1, 0, 0, 3, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
        [0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
      ]

      var wall_size = 5
      var wall_height = 3
      var wall
      var walls = document.querySelector('#walls')

      for (var x = 0; x < mapa.length; x++) {
        for (var y = 0; y < mapa[x].length; y++) {

          var position = (x - mapa.length/2)*wall_size + ' ' + 1.5 + ' ' + (y - mapa[x].length/2)*wall_size

          if (mapa[x][y] == 0) {
            continue
          } else if(mapa[x][y] == 1) {
            // wall
            wall = document.createElement('a-box')
            walls.appendChild(wall)
            wall.setAttribute('color', '#fff')
            wall.setAttribute('material', 'src: #wall')
            wall.setAttribute('width', wall_size)
            wall.setAttribute('depth', wall_size)
            wall.setAttribute('height', wall_height)
            wall.setAttribute('position', position)
            wall.setAttribute('static-body', '')
          } else if(mapa[x][y] == 2) {
            // player
          } else if (mapa[x][y] == 3) {
            // award
          }
        }
      }
    </script>
	</body>
</html>

